import { Meta, Canvas, Story, ArgsTable } from '@storybook/addon-docs'
import UIProvider, { useUI } from 'src/sdk/ui/Provider'
import Button from 'src/components/ui/Button'
import ButtonLink from 'src/components/ui/Button/ButtonLink'
import { RegionalizationModalContent } from 'src/components/regionalization/RegionalizationModal'

import Modal from '.'
import Icon from '../Icon'
import {
  TokenTable,
  TokenRow,
  TokenDivider,
} from 'src/../.storybook/components'

<Meta title="Molecules/Modal" component={Modal} />

export const ModalTemplate = (args) => {
  const { modal, openModal } = useUI()
  return (
    <div>
      <Button variant="primary" onClick={() => openModal()}>
        Open Modal
      </Button>
      {modal && (
        <Modal>
          {({ fadeOut }) => (
            <div
              style={{
                display: 'flex',
                alignItems: 'center',
                flexDirection: 'column',
                padding: '3rem',
                backgroundColor: 'white',
              }}
            >
              <h1
                style={{
                  fontSize: '2rem',
                  paddingBottom: '1rem',
                }}
              >
                Hello, i'm a Modal!
              </h1>
              <Button onClick={fadeOut}>Close Modal</Button>
            </div>
          )}
        </Modal>
      )}
    </div>
  )
}

export const Template = (args) => {
  return (
    <UIProvider>
      <ModalTemplate />
    </UIProvider>
  )
}

<header>

# Modal

Modals are dialog windows that sit on top of an application's main view. Once a Modal is open, interactions with the content behind it are blocked.

</header>

## Overview

The `Modal` component uses [FastStore UI Modal](https://www.faststore.dev/reference/ui/molecules/Modal) as base.

---

## Usage

`import Modal from 'src/components/ui/Modal'`

<Canvas>
  <Story name="Overview">{Template.bind({})}</Story>
</Canvas>

---

<TokenTable>
  <TokenRow token="--fs-modal-position-top" value="30vh" />
  <TokenRow token="--fs-modal-position-right" value="var(--fs-spacing-4)" />
  <TokenRow token="--fs-modal-position-left" value="var(--fs-spacing-4)" />
  <TokenRow
    token="--fs-modal-max-width"
    value="calc(var(--fs-grid-breakpoint-desktop) / 3)"
  />
  <TokenRow token="--fs-modal-min-height" value="var(--fs-spacing-5)" />
  <TokenRow token="--fs-modal-margin" value="auto" />
  <TokenRow token="--fs-modal-border-radius" value="var(--fs-spacing-0)" />
  <TokenDivider />
  <TokenRow token="--fs-modal-width-tablet" value="calc(100vw / 3)" />
  <TokenRow
    token="--fs-modal-min-width-tablet"
    value="calc(var(--fs-grid-breakpoint-desktop) / 3)"
  />
  <TokenDivider />
  <TokenRow
    token="--fs-modal-transition-timing"
    value="var(--fs-transition-timing)"
  />
  <TokenRow token="--fs-modal-transition-property" value="transform" />
  <TokenRow token="--fs-modal-transition-in-function" value="ease-in" />
  <TokenRow token="--fs-modal-transition-out-function" value="ease-out" />
</TokenTable>

---

## Use Cases

<section className="sbdocs-list">
  <ul className="sbdocs-ul-row">
    <li>
      <div>
        <UIProvider>
          <RegionalizationModalContent onClose={() => {}} />
        </UIProvider>
      </div>
      <article className="sbdocs-list-text">
        <h3>RegionalizationModal</h3>
        <p>
          It's the modal that, trigged by <code>RegionalizationButton</code> or{' '}
          <code>RegionalizationBar</code>, shows the user the{' '}
          <code>RegionalizationInput</code> search.
        </p>
        <ButtonLink
          variant="tertiary"
          href="../?path=/docs/features-regionalization-regionalizationmodal--overview"
          data-fs-button-size="small"
        >
          See more
          <Icon name="ArrowRight" width="18" height="18" weight="bold" />
        </ButtonLink>
      </article>
    </li>
  </ul>
</section>

import { Meta, Story, Preview, ArgsTable } from '@storybook/addon-docs/blocks'
import { useMemo } from 'react'
import Price from '.'

export const value = 62.5

<Meta
  title="Atoms/Price"
  argTypes={{
    variant: {
      options: ['selling', 'listing', 'spot', 'savings', 'installment'],
      control: { type: 'select' },
    },
    formatter: {
      table: { disable: true },
    },
  }}
/>

# Default

<Preview>
  <Story
    name="Default"
    args={{
      value
    }}
  >
    {({value}) => <Price value={value} />}
  </Story>
</Preview>

# INTL Formatted

<Preview>
  <Story
    name="INTL Formatted"
    args={{
      value
    }}
  >
    {({value}) => {
      function useIntlFormatter(price) {
        return useMemo(() => {
          const formattedPrice = new Intl.NumberFormat('en-GB', {
            style: 'currency',
            currency: 'EUR',
          }).format(price)
          return formattedPrice
        }, [price])
      }
      return <Price formatter={useIntlFormatter} value={value} />
    }}
  </Story>
</Preview>

# INTL Formatted to parts

<Preview>
  <Story
    name="INTL Formatted to parts"
    args={{
      value
    }}
  >
    {({value}) => {
      function useIntlFormatter(price) {
        return useMemo(() => {
          const formattedPrice = new Intl.NumberFormat('en-GB', {
            style: 'currency',
            currency: 'EUR',
          }).format(price)
          return formattedPrice
        }, [price])
      }
      return <Price formatter={useIntlFormatter} value={value} />
    }}
  </Story>
</Preview>

# Variant

<Preview>
  <Story
    name="Variant"
    args={{
      value,
      variant: 'selling',
    }}
  >
    {({value, variant}) => {
      function useIntlFormatter(price) {
        return useMemo(() => {
          const formattedPrice = new Intl.NumberFormat('en-GB', {
            style: 'currency',
            currency: 'EUR',
          }).format(price)
          return formattedPrice
        }, [price])
      }
      return <Price formatter={useIntlFormatter} value={value} variant={variant} />
    }}
  </Story>
</Preview>

# Custom

<Preview>
  <Story
    name="Custom"
    args={{
      value
    }}
  >
    {({value}) => {
      function customFormatter(price) {
        const unformattedPrice = `${price}`
        const formattedPrice = `${unformattedPrice.replace('.', ',')} reais`
        return formattedPrice
      }
      return <Price formatter={customFormatter} value={value} />
    }}
  </Story>
</Preview>

# Props

<ArgsTable of={Price} />

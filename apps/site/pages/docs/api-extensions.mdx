---
title: '    Overview'
sidebar_label: 'API Extensions'
---

import { Callout, Step, Steps } from 'nextra-theme-docs'
import { ExtendableQueryTable } from './../../components/ExtendableQueryTable'

<header>

# API extension

</header>

In this track, learn how to extend the FastStore API schema by adding new
data to the existing [queries](/).

While the [FastStore API](/docs/faststore-api) provides a [GraphQL schema for ecommerce](https://v1.faststore.dev/reference/api/queries) that covers a general use case, 
some stores may need to access other, more specific, information.

Note that adding additional API endpoints to your storefront can potentially impact site performance, as already covered in the guide
[Best practices for fetching data](https://v1.faststore.dev/how-to-guides/faststore-api/fetching-api-data#best-practices-for-fetching-data). 
If you need to retrieve more data, you can achieve this by extending the FastStore API schema and incorporating new data into the existing [queries](https://v1.faststore.dev/reference/api/queries).

---

## Main concepts

<ul>
  <li>
    <details>
      <summary>GraphQL Optimizations & types</summary>
      GraphQL Optimizations are build-time generated mappings of the queries declared in a store.
      They enable the GraphQL server of the store to be more efficient and secure by enabling it to accepting only previously defined operations.
      Therefore, if these GraphQL optimizations are not generated, the changes in the GraphQL schema (new queries, addition or deletion a field from a query, changes in a GraphQL type) are not reflected in the store.
      Changes in resolvers are always visible automatically and don't require generating the optimizations to see them.

      At the same time GraphQL queries are optimized, the TypeScript types for the API are updated to reflect the changes that happened to the GraphQL schema. This process is also transparent.
    </details>
  </li>
</ul>

---

## Best practices for fetching data

Site performance tends to get worse as more API requests are made by a page. Because of this, the best practices for fetching data on your storefront involve getting precisely the data you need with the minimum number possible of requests to the FastStore API. The sections below go over what you can do to minimize the API requests of your pages.

### Fetch only the data you need

GraphQL allows you to customize your query to get precisely the data you need, which reduces the data returned from the requests. Double-check your queries to make sure they are not over-fetching.

This also means that you must be mindful of the data brought into your query by [GraphQL fragments](https://graphql.org/learn/queries/#fragments). Use them only when they do not include unnecessary data.

### Do not send requests to other APIs

If you need data that is not available on the native [FastStore GraphQL schema](https://v1.faststore.dev/reference/api/objects), check the [root object](https://v1.faststore.dev/reference/api/objects).

The [GraphQL root object](https://graphql.org/learn/execution/#root-fields-resolvers) represents the top-level object returned to a query. You can see what data is available in the root object by adding logs.

If the root object also lacks the information you need, you must [extend the API schema](/docs/api-extensions/extending-api-schema) instead of adding other requests to your page.

### Avoid custom API Routes

We do not recomend using Next.js [API Routes](https://nextjs.org/docs/api-routes/introduction) other than the ones already built in FastStore.

If you do use this type of function, you must be mindful to always check which ones are actually running and remove the ones that are not.

To see what API Routes are running in your project, you can... *(See the code's comment)*  {/* IS THE FOLLOWING STILL VALID? run the command `yarn build` at the root of your project and check the log. Then, check the directory `src/pages/api` of your project and remove functions that are not running or are not included in the [starter](/starters) you used. */}

---

<ul class="nx-card-list">
  <li class="nx-card">
    <a href="/docs/api-extensions/extending-api-schema">
      #### Extending VTEX API schemas
      Lorem ipsum dolor sit amet, consectetur adipiscing elit.
    </a>
  </li>

  <li class="nx-card">
    <a href="/docs/api-extensions/extending-queries-using-fragments">
      #### Extending queries usign fragments
      Extend GraphQL queries with fragments to add custom fields and enhance query functionality.
    </a>
  </li>

  <li class="nx-card">
    <a href="/docs/api-extensions/consuming-api-extensions">
      #### Consuming FastStore API extension with custom components
      Lorem ipsum dolor sit amet, consectetur adipiscing elit.
    </a>
  </li>

  <li class="nx-card">
    <a href="/docs/api-extensions/troubleshooting">
      #### Troubleshooting
      Lorem ipsum dolor sit amet, consectetur adipiscing elit.
    </a>
  </li>
</ul>
